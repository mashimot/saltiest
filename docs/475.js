"use strict";(self.webpackChunksalt=self.webpackChunksalt||[]).push([[475],{84475:function(Y,h,a){a.r(h),a.d(h,{ProjectsModule:function(){return S}});var s=a(61116),p=a(35327),g=a(42693),t=a(57490),l=function(){return(l=Object.assign||function(e){for(var n,o=1,r=arguments.length;o<r;o++)for(var i in n=arguments[o])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)},v=function(){function e(n){this.http=n,this.API_URL="https://salty-suite.herokuapp.com/api/projects",this.httpOptions={headers:new g.WM({"Content-Type":"application/json"})}}return e.prototype.getProjects=function(n){var o={params:l({},n)};return this.http.get(""+this.API_URL,o)},e.prototype.getProjectById=function(n){return this.http.get(this.API_URL+"/"+n)},e.prototype.updateProject=function(n,o){return this.http.put(this.API_URL+"/"+n,o,this.httpOptions)},e.prototype.storeProject=function(n){return this.http.post(""+this.API_URL,n,this.httpOptions)},e.prototype.deleteProject=function(n){return this.http.delete(this.API_URL+"/"+n,this.httpOptions)},e.\u0275fac=function(o){return new(o||e)(t.LFG(g.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),P=a(44019),j=a(79996),m=a(29282),Z=a(75814),T=function(e){return["/projects",e,"edit"]},b=function(e){return["/form-builder",e,"edit"]};function C(e,n){if(1&e){var o=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"div",7),t.TgZ(2,"h5",8),t._uU(3),t.qZA(),t.TgZ(4,"a",9),t._uU(5,"Edit"),t.qZA(),t.TgZ(6,"button",10),t.NdJ("click",function(){var u=t.CHM(o).$implicit;return t.oxw(2).askToDelete(u)}),t._uU(7,"Delete"),t.qZA(),t.qZA(),t.TgZ(8,"div",11),t.TgZ(9,"p",12),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"p",12),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"a",9),t._uU(16,"Form Builder"),t.qZA(),t.qZA(),t.qZA()}if(2&e){var r=n.$implicit;t.xp6(3),t.Oqu(r.name),t.xp6(1),t.Q6J("routerLink",t.VKq(11,T,r.id)),t.xp6(6),t.hij("Created at: ",t.xi3(11,5,r.created_at,"dd/MM/yyyy"),""),t.xp6(3),t.hij("Last Update: ",t.xi3(14,8,r.updated_at,"dd/MM/yyyy"),""),t.xp6(2),t.Q6J("routerLink",t.VKq(13,b,r.id))}}var A=function(){return["/projects","create"]},F=function(e,n,o){return{itemsPerPage:e,currentPage:n,totalItems:o}};function x(e,n){if(1&e){var o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"a",1),t._uU(2,"Create"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,C,17,15,"div",3),t.ALo(5,"paginate"),t.qZA(),t.TgZ(6,"pre"),t._uU(7),t.ALo(8,"json"),t.qZA(),t.TgZ(9,"pagination-controls",4),t.NdJ("pageChange",function(u){return t.CHM(o),t.oxw().pageChange(u)}),t.qZA(),t.TgZ(10,"app-modal",5),t.NdJ("handleNo",function(){return t.CHM(o),t.oxw().closeModal()})("handleYes",function(){return t.CHM(o),t.oxw().deleteProject()}),t.qZA(),t.qZA()}if(2&e){var r=n.ngIf,i=t.oxw();t.xp6(1),t.Q6J("routerLink",t.DdM(10,A)),t.xp6(3),t.Q6J("ngForOf",t.xi3(5,5,r.data,t.kEZ(11,F,r.per_page,r.current_page,r.total))),t.xp6(3),t.Oqu(t.lcZ(8,8,r)),t.xp6(3),t.Q6J("message",i.message)("isOpen",i.showModal)}}var _=function(){function e(n,o,r){this.projectService=n,this.activatedRoute=o,this.router=r,this.message="?",this.showModal=!1,this.staticProjects$={current_page:1,data:[{id:2,name:"Teste",created_at:"2021-05-23 23:53:15",updated_at:"2021-05-23 23:53:15"}],first_page_url:"http://salty-suite.herokuapp.com/api/projects?page=1",from:1,last_page:1,last_page_url:"http://salty-suite.herokuapp.com/api/projects?page=1",next_page_url:null,path:"http://salty-suite.herokuapp.com/api/projects",per_page:10,prev_page_url:null,to:1,total:1}}return e.prototype.ngOnInit=function(){var n=this;this.activatedRoute.queryParams.subscribe(function(o){n.pageNumber=o.page||1,n.loadProjects()})},e.prototype.pageChange=function(n){this.router.navigate([],{queryParams:{page:n}})},e.prototype.askToDelete=function(n){this.showModal=!0,this.projectToDelete=n,this.projectToDelete.name&&(this.message="Would you like to delete "+this.projectToDelete.name+"?")},e.prototype.closeModal=function(){this.showModal=!1},e.prototype.deleteProject=function(){this.projectToDelete&&(this.joeysWorldTour$=this.projectService.deleteProject(this.projectToDelete.id).pipe((0,P.b)(function(o){console.log("response from server:",o)}),(0,j.U)(function(o){return o})),console.log(this.joeysWorldTour$))},e.prototype.loadProjects=function(){this.projects$=this.projectService.getProjects({page:this.pageNumber}).pipe((0,j.U)(function(n){return n.paginate}))},e.\u0275fac=function(o){return new(o||e)(t.Y36(v),t.Y36(p.gz),t.Y36(p.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-project"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"row"],["class","card col-md-4",4,"ngFor","ngForOf"],[3,"pageChange"],[3,"message","isOpen","handleNo","handleYes"],[1,"card","col-md-4"],[1,"card-header"],[1,"card-title"],[1,"btn","btn-outline-dark","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"card-body"],[1,"card-text"]],template:function(o,r){1&o&&(t.YNc(0,x,11,15,"div",0),t.ALo(1,"async")),2&o&&t.Q6J("ngIf",t.lcZ(1,1,r.projects$))},directives:[s.O5,p.yS,s.sg,m.LS,Z.z],pipes:[s.Ov,m._s,s.Ts,s.uU],styles:[""]}),e}(),c=a(11462);function M(e,n){1&e&&(t.TgZ(0,"div"),t._uU(1,"You did not enter a field"),t.qZA())}function U(e,n){1&e&&(t.TgZ(0,"div"),t._uU(1,"Your field is too short"),t.qZA())}function q(e,n){if(1&e&&(t.TgZ(0,"div",6),t.YNc(1,M,2,0,"div",7),t.YNc(2,U,2,0,"div",7),t.qZA()),2&e){var o=t.oxw();t.xp6(1),t.Q6J("ngIf",null==o.f.name.errors?null:o.f.name.errors.required),t.xp6(1),t.Q6J("ngIf",null==o.f.name.errors?null:o.f.name.errors.minlength)}}var I=function(e){return{"is-invalid":e}},y=function(){function e(n,o,r,i){this.projectService=n,this.fb=o,this.router=r,this.route=i}return e.prototype.ngOnInit=function(){var n=this;this.projectForm=this.fb.group({id:[],name:["",[c.kI.required]]}),this.route.params.subscribe(function(o){var r=o.id;console.log(o),r&&n.projectService.getProjectById(r).subscribe(function(i){i.success&&n.projectForm.patchValue({id:r,name:i.data.name})})})},e.prototype.onSubmit=function(){var n=this,o=this.projectForm.value,r=this.projectForm.value;o.id?this.projectService.updateProject(o.id,r).subscribe(function(i){i.success&&n.router.navigate(["projects",o.id,"edit"])}):this.projectService.storeProject(r).subscribe(function(i){i.success&&n.router.navigate(["projects"])})},Object.defineProperty(e.prototype,"f",{get:function(){return this.projectForm.controls},enumerable:!1,configurable:!0}),e.\u0275fac=function(o){return new(o||e)(t.Y36(v),t.Y36(c.qu),t.Y36(p.F0),t.Y36(p.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-project-form"]],decls:8,vars:5,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","project_name"],["type","text","id","project_name","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-outline-primary"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(o,r){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(1,"div",1),t.TgZ(2,"label",2),t._uU(3,"Project Name"),t.qZA(),t._UZ(4,"input",3),t.qZA(),t.YNc(5,q,3,2,"div",4),t.TgZ(6,"button",5),t._uU(7,"Submit"),t.qZA(),t.qZA()),2&o&&(t.Q6J("formGroup",r.projectForm),t.xp6(4),t.Q6J("ngClass",t.VKq(3,I,r.f.name.invalid)),t.xp6(1),t.Q6J("ngIf",r.f.name.invalid||r.f.name.touched))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,s.mk,s.O5],styles:[""]}),e}(),J=[{path:"",component:_},{path:"create",component:y},{path:":id",component:_},{path:":id/edit",component:y}],L=function(){function e(){}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.Bz.forChild(J)],p.Bz]}),e}(),O=a(75425),S=function(){function e(){}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,L,O.m,m.JX]]}),e}()}}]);