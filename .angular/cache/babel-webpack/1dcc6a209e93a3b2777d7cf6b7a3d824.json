{"ast":null,"code":"'use strict';\n\nvar customEvent = require('custom-event');\n\nvar eventmap = require('./eventmap');\n\nvar doc = global.document;\nvar addEvent = addEventEasy;\nvar removeEvent = removeEventEasy;\nvar hardCache = [];\n\nif (!global.addEventListener) {\n  addEvent = addEventHard;\n  removeEvent = removeEventHard;\n}\n\nmodule.exports = {\n  add: addEvent,\n  remove: removeEvent,\n  fabricate: fabricateEvent\n};\n\nfunction addEventEasy(el, type, fn, capturing) {\n  return el.addEventListener(type, fn, capturing);\n}\n\nfunction addEventHard(el, type, fn) {\n  return el.attachEvent('on' + type, wrap(el, type, fn));\n}\n\nfunction removeEventEasy(el, type, fn, capturing) {\n  return el.removeEventListener(type, fn, capturing);\n}\n\nfunction removeEventHard(el, type, fn) {\n  var listener = unwrap(el, type, fn);\n\n  if (listener) {\n    return el.detachEvent('on' + type, listener);\n  }\n}\n\nfunction fabricateEvent(el, type, model) {\n  var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();\n\n  if (el.dispatchEvent) {\n    el.dispatchEvent(e);\n  } else {\n    el.fireEvent('on' + type, e);\n  }\n\n  function makeClassicEvent() {\n    var e;\n\n    if (doc.createEvent) {\n      e = doc.createEvent('Event');\n      e.initEvent(type, true, true);\n    } else if (doc.createEventObject) {\n      e = doc.createEventObject();\n    }\n\n    return e;\n  }\n\n  function makeCustomEvent() {\n    return new customEvent(type, {\n      detail: model\n    });\n  }\n}\n\nfunction wrapperFactory(el, type, fn) {\n  return function wrapper(originalEvent) {\n    var e = originalEvent || global.event;\n    e.target = e.target || e.srcElement;\n\n    e.preventDefault = e.preventDefault || function preventDefault() {\n      e.returnValue = false;\n    };\n\n    e.stopPropagation = e.stopPropagation || function stopPropagation() {\n      e.cancelBubble = true;\n    };\n\n    e.which = e.which || e.keyCode;\n    fn.call(el, e);\n  };\n}\n\nfunction wrap(el, type, fn) {\n  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);\n  hardCache.push({\n    wrapper: wrapper,\n    element: el,\n    type: type,\n    fn: fn\n  });\n  return wrapper;\n}\n\nfunction unwrap(el, type, fn) {\n  var i = find(el, type, fn);\n\n  if (i) {\n    var wrapper = hardCache[i].wrapper;\n    hardCache.splice(i, 1); // free up a tad of memory\n\n    return wrapper;\n  }\n}\n\nfunction find(el, type, fn) {\n  var i, item;\n\n  for (i = 0; i < hardCache.length; i++) {\n    item = hardCache[i];\n\n    if (item.element === el && item.type === type && item.fn === fn) {\n      return i;\n    }\n  }\n}","map":{"version":3,"sources":["C:/dev/saltiest/node_modules/crossvent/src/crossvent.js"],"names":["customEvent","require","eventmap","doc","global","document","addEvent","addEventEasy","removeEvent","removeEventEasy","hardCache","addEventListener","addEventHard","removeEventHard","module","exports","add","remove","fabricate","fabricateEvent","el","type","fn","capturing","attachEvent","wrap","removeEventListener","listener","unwrap","detachEvent","model","e","indexOf","makeCustomEvent","makeClassicEvent","dispatchEvent","fireEvent","createEvent","initEvent","createEventObject","detail","wrapperFactory","wrapper","originalEvent","event","target","srcElement","preventDefault","returnValue","stopPropagation","cancelBubble","which","keyCode","call","push","element","i","find","splice","item","length"],"mappings":"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","sourcesContent":["'use strict';\n\nvar customEvent = require('custom-event');\nvar eventmap = require('./eventmap');\nvar doc = global.document;\nvar addEvent = addEventEasy;\nvar removeEvent = removeEventEasy;\nvar hardCache = [];\n\nif (!global.addEventListener) {\n  addEvent = addEventHard;\n  removeEvent = removeEventHard;\n}\n\nmodule.exports = {\n  add: addEvent,\n  remove: removeEvent,\n  fabricate: fabricateEvent\n};\n\nfunction addEventEasy (el, type, fn, capturing) {\n  return el.addEventListener(type, fn, capturing);\n}\n\nfunction addEventHard (el, type, fn) {\n  return el.attachEvent('on' + type, wrap(el, type, fn));\n}\n\nfunction removeEventEasy (el, type, fn, capturing) {\n  return el.removeEventListener(type, fn, capturing);\n}\n\nfunction removeEventHard (el, type, fn) {\n  var listener = unwrap(el, type, fn);\n  if (listener) {\n    return el.detachEvent('on' + type, listener);\n  }\n}\n\nfunction fabricateEvent (el, type, model) {\n  var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();\n  if (el.dispatchEvent) {\n    el.dispatchEvent(e);\n  } else {\n    el.fireEvent('on' + type, e);\n  }\n  function makeClassicEvent () {\n    var e;\n    if (doc.createEvent) {\n      e = doc.createEvent('Event');\n      e.initEvent(type, true, true);\n    } else if (doc.createEventObject) {\n      e = doc.createEventObject();\n    }\n    return e;\n  }\n  function makeCustomEvent () {\n    return new customEvent(type, { detail: model });\n  }\n}\n\nfunction wrapperFactory (el, type, fn) {\n  return function wrapper (originalEvent) {\n    var e = originalEvent || global.event;\n    e.target = e.target || e.srcElement;\n    e.preventDefault = e.preventDefault || function preventDefault () { e.returnValue = false; };\n    e.stopPropagation = e.stopPropagation || function stopPropagation () { e.cancelBubble = true; };\n    e.which = e.which || e.keyCode;\n    fn.call(el, e);\n  };\n}\n\nfunction wrap (el, type, fn) {\n  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);\n  hardCache.push({\n    wrapper: wrapper,\n    element: el,\n    type: type,\n    fn: fn\n  });\n  return wrapper;\n}\n\nfunction unwrap (el, type, fn) {\n  var i = find(el, type, fn);\n  if (i) {\n    var wrapper = hardCache[i].wrapper;\n    hardCache.splice(i, 1); // free up a tad of memory\n    return wrapper;\n  }\n}\n\nfunction find (el, type, fn) {\n  var i, item;\n  for (i = 0; i < hardCache.length; i++) {\n    item = hardCache[i];\n    if (item.element === el && item.type === type && item.fn === fn) {\n      return i;\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"script"}