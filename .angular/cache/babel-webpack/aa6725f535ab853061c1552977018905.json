{"ast":null,"code":"'use strict';\n\nvar atoa = require('atoa');\n\nvar debounce = require('./debounce');\n\nmodule.exports = function emitter(thing, options) {\n  var opts = options || {};\n  var evt = {};\n\n  if (thing === undefined) {\n    thing = {};\n  }\n\n  thing.on = function (type, fn) {\n    if (!evt[type]) {\n      evt[type] = [fn];\n    } else {\n      evt[type].push(fn);\n    }\n\n    return thing;\n  };\n\n  thing.once = function (type, fn) {\n    fn._once = true; // thing.off(fn) still works!\n\n    thing.on(type, fn);\n    return thing;\n  };\n\n  thing.off = function (type, fn) {\n    var c = arguments.length;\n\n    if (c === 1) {\n      delete evt[type];\n    } else if (c === 0) {\n      evt = {};\n    } else {\n      var et = evt[type];\n\n      if (!et) {\n        return thing;\n      }\n\n      et.splice(et.indexOf(fn), 1);\n    }\n\n    return thing;\n  };\n\n  thing.emit = function () {\n    var args = atoa(arguments);\n    return thing.emitterSnapshot(args.shift()).apply(this, args);\n  };\n\n  thing.emitterSnapshot = function (type) {\n    var et = (evt[type] || []).slice(0);\n    return function () {\n      var args = atoa(arguments);\n      var ctx = this || thing;\n\n      if (type === 'error' && opts.throws !== false && !et.length) {\n        throw args.length === 1 ? args[0] : args;\n      }\n\n      et.forEach(function emitter(listen) {\n        if (opts.async) {\n          debounce(listen, args, ctx);\n        } else {\n          listen.apply(ctx, args);\n        }\n\n        if (listen._once) {\n          thing.off(type, listen);\n        }\n      });\n      return thing;\n    };\n  };\n\n  return thing;\n};","map":{"version":3,"sources":["C:/dev/saltiest/node_modules/contra/emitter.js"],"names":["atoa","require","debounce","module","exports","emitter","thing","options","opts","evt","undefined","on","type","fn","push","once","_once","off","c","arguments","length","et","splice","indexOf","emit","args","emitterSnapshot","shift","apply","slice","ctx","throws","forEach","listen","async"],"mappings":"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","sourcesContent":["'use strict';\n\nvar atoa = require('atoa');\nvar debounce = require('./debounce');\n\nmodule.exports = function emitter (thing, options) {\n  var opts = options || {};\n  var evt = {};\n  if (thing === undefined) { thing = {}; }\n  thing.on = function (type, fn) {\n    if (!evt[type]) {\n      evt[type] = [fn];\n    } else {\n      evt[type].push(fn);\n    }\n    return thing;\n  };\n  thing.once = function (type, fn) {\n    fn._once = true; // thing.off(fn) still works!\n    thing.on(type, fn);\n    return thing;\n  };\n  thing.off = function (type, fn) {\n    var c = arguments.length;\n    if (c === 1) {\n      delete evt[type];\n    } else if (c === 0) {\n      evt = {};\n    } else {\n      var et = evt[type];\n      if (!et) { return thing; }\n      et.splice(et.indexOf(fn), 1);\n    }\n    return thing;\n  };\n  thing.emit = function () {\n    var args = atoa(arguments);\n    return thing.emitterSnapshot(args.shift()).apply(this, args);\n  };\n  thing.emitterSnapshot = function (type) {\n    var et = (evt[type] || []).slice(0);\n    return function () {\n      var args = atoa(arguments);\n      var ctx = this || thing;\n      if (type === 'error' && opts.throws !== false && !et.length) { throw args.length === 1 ? args[0] : args; }\n      et.forEach(function emitter (listen) {\n        if (opts.async) { debounce(listen, args, ctx); } else { listen.apply(ctx, args); }\n        if (listen._once) { thing.off(type, listen); }\n      });\n      return thing;\n    };\n  };\n  return thing;\n};\n"]},"metadata":{},"sourceType":"script"}