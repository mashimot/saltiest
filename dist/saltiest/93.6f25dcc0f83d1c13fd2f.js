"use strict";(self.webpackChunksalt=self.webpackChunksalt||[]).push([[93],{29093:function(N,f,a){a.r(f),a.d(f,{ProjectsModule:function(){return U}});var c=a(61116),p=a(35327),g=a(98057),_=a(44019),v=a(79996),e=a(57490),d=a(29282),Z=a(75814),T=function(t){return["/projects",t,"edit"]},y=function(t){return["/form-builder",t,"edit"]};function P(t,n){if(1&t){var o=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"h5",8),e._uU(3),e.qZA(),e.TgZ(4,"a",9),e._uU(5,"Edit"),e.qZA(),e.TgZ(6,"button",10),e.NdJ("click",function(){var u=e.CHM(o).$implicit;return e.oxw(2).askToDelete(u)}),e._uU(7,"Delete"),e.qZA(),e.qZA(),e.TgZ(8,"div",11),e.TgZ(9,"p",12),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"p",12),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"a",9),e._uU(16,"Form Builder"),e.qZA(),e.qZA(),e.qZA()}if(2&t){var r=n.$implicit;e.xp6(3),e.Oqu(r.name),e.xp6(1),e.Q6J("routerLink",e.VKq(11,T,r.id)),e.xp6(6),e.hij("Created at: ",e.xi3(11,5,r.created_at,"dd/MM/yyyy"),""),e.xp6(3),e.hij("Last Update: ",e.xi3(14,8,r.updated_at,"dd/MM/yyyy"),""),e.xp6(2),e.Q6J("routerLink",e.VKq(13,y,r.id))}}var C=function(){return["/projects","create"]},b=function(t,n,o){return{itemsPerPage:t,currentPage:n,totalItems:o}};function A(t,n){if(1&t){var o=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"a",1),e._uU(2,"Create"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,P,17,15,"div",3),e.ALo(5,"paginate"),e.qZA(),e.TgZ(6,"pre"),e._uU(7),e.ALo(8,"json"),e.qZA(),e.TgZ(9,"pagination-controls",4),e.NdJ("pageChange",function(u){return e.CHM(o),e.oxw().pageChange(u)}),e.qZA(),e.TgZ(10,"app-modal",5),e.NdJ("handleNo",function(){return e.CHM(o),e.oxw().closeModal()})("handleYes",function(){return e.CHM(o),e.oxw().deleteProject()}),e.qZA(),e.qZA()}if(2&t){var r=n.ngIf,i=e.oxw();e.xp6(1),e.Q6J("routerLink",e.DdM(10,C)),e.xp6(3),e.Q6J("ngForOf",e.xi3(5,5,r.data,e.kEZ(11,b,r.per_page,r.current_page,r.total))),e.xp6(3),e.Oqu(e.lcZ(8,8,r)),e.xp6(3),e.Q6J("message",i.message)("isOpen",i.showModal)}}var h=function(){function t(n,o,r){this.projectService=n,this.activatedRoute=o,this.router=r,this.message="?",this.showModal=!1,this.staticProjects$={current_page:1,data:[{id:2,name:"Teste",created_at:"2021-05-23 23:53:15",updated_at:"2021-05-23 23:53:15"}],first_page_url:"http://salty-suite.herokuapp.com/api/projects?page=1",from:1,last_page:1,last_page_url:"http://salty-suite.herokuapp.com/api/projects?page=1",next_page_url:null,path:"http://salty-suite.herokuapp.com/api/projects",per_page:10,prev_page_url:null,to:1,total:1}}return t.prototype.ngOnInit=function(){var n=this;this.activatedRoute.queryParams.subscribe(function(o){n.pageNumber=o.page||1,n.loadProjects()})},t.prototype.pageChange=function(n){this.router.navigate([],{queryParams:{page:n}})},t.prototype.askToDelete=function(n){this.showModal=!0,this.projectToDelete=n,this.projectToDelete.name&&(this.message="Would you like to delete "+this.projectToDelete.name+"?")},t.prototype.closeModal=function(){this.showModal=!1},t.prototype.deleteProject=function(){this.projectToDelete&&(this.joeysWorldTour$=this.projectService.deleteProject(this.projectToDelete.id).pipe((0,_.b)(function(o){console.log("response from server:",o)}),(0,v.U)(function(o){return o})),console.log(this.joeysWorldTour$))},t.prototype.loadProjects=function(){this.projects$=this.projectService.getProjects({page:this.pageNumber}).pipe((0,v.U)(function(n){return n.paginate}))},t.\u0275fac=function(o){return new(o||t)(e.Y36(g.Y),e.Y36(p.gz),e.Y36(p.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-project"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"row"],["class","card col-md-4",4,"ngFor","ngForOf"],[3,"pageChange"],[3,"message","isOpen","handleNo","handleYes"],[1,"card","col-md-4"],[1,"card-header"],[1,"card-title"],[1,"btn","btn-outline-dark","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"card-body"],[1,"card-text"]],template:function(o,r){1&o&&(e.YNc(0,A,11,15,"div",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,r.projects$))},directives:[c.O5,p.yS,c.sg,d.LS,Z.z],pipes:[c.Ov,d._s,c.Ts,c.uU],styles:[""]}),t}(),s=a(11462);function F(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"You did not enter a field"),e.qZA())}function x(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Your field is too short"),e.qZA())}function M(t,n){if(1&t&&(e.TgZ(0,"div",6),e.YNc(1,F,2,0,"div",7),e.YNc(2,x,2,0,"div",7),e.qZA()),2&t){var o=e.oxw();e.xp6(1),e.Q6J("ngIf",null==o.f.name.errors?null:o.f.name.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.f.name.errors?null:o.f.name.errors.minlength)}}var q=function(t){return{"is-invalid":t}},j=function(){function t(n,o,r,i){this.projectService=n,this.fb=o,this.router=r,this.route=i}return t.prototype.ngOnInit=function(){var n=this;this.projectForm=this.fb.group({id:[],name:["",[s.kI.required]]}),this.route.params.subscribe(function(o){var r=o.id;console.log(o),r&&n.projectService.getProjectById(r).subscribe(function(i){i.success&&n.projectForm.patchValue({id:r,name:i.data.name})})})},t.prototype.onSubmit=function(){var n=this,o=this.projectForm.value,r=this.projectForm.value;o.id?this.projectService.updateProject(o.id,r).subscribe(function(i){i.success&&n.router.navigate(["projects",o.id,"edit"])}):this.projectService.storeProject(r).subscribe(function(i){i.success&&n.router.navigate(["projects"])})},Object.defineProperty(t.prototype,"f",{get:function(){return this.projectForm.controls},enumerable:!1,configurable:!0}),t.\u0275fac=function(o){return new(o||t)(e.Y36(g.Y),e.Y36(s.qu),e.Y36(p.F0),e.Y36(p.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-project-form"]],decls:8,vars:5,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","project_name"],["type","text","id","project_name","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-outline-primary"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(o,r){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(1,"div",1),e.TgZ(2,"label",2),e._uU(3,"Project Name"),e.qZA(),e._UZ(4,"input",3),e.qZA(),e.YNc(5,M,3,2,"div",4),e.TgZ(6,"button",5),e._uU(7,"Submit"),e.qZA(),e.qZA()),2&o&&(e.Q6J("formGroup",r.projectForm),e.xp6(4),e.Q6J("ngClass",e.VKq(3,q,r.f.name.invalid)),e.xp6(1),e.Q6J("ngIf",r.f.name.invalid||r.f.name.touched))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,c.mk,c.O5],styles:[""]}),t}(),J=[{path:"",component:h},{path:"create",component:j},{path:":id",component:h},{path:":id/edit",component:j}],Y=function(){function t(){}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.Bz.forChild(J)],p.Bz]}),t}(),S=a(75425),U=function(){function t(){}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.ez,Y,S.m,d.JX]]}),t}()}}]);