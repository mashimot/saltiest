"use strict";(self.webpackChunksalt=self.webpackChunksalt||[]).push([[255],{32255:function(L,f,m){m.r(f),m.d(f,{MigrationModule:function(){return q}});var d=m(61116),g=m(35327),T=m(44164),n=m(57490),y=function(){function t(){}return t.prototype.transform=function(e,a){if(void 0!==e&&""!=e.trim()){var r=e.replace(/_(\w)/g,function(s){return s.toUpperCase()}).replace(/_/g,"");return(r.charAt(0).toUpperCase()+r.slice(1)).trim()}return""},t.\u0275fac=function(a){return new(a||t)},t.\u0275pipe=n.Yjl({name:"snakeCaseToCamelCase",type:t,pure:!0}),t}(),I=m(39310);function M(t,e){if(1&t&&(n.TgZ(0,"div",6),n.TgZ(1,"div",7),n.TgZ(2,"h1"),n._uU(3),n.qZA(),n.qZA(),n.TgZ(4,"div",8),n.TgZ(5,"textarea",9),n._uU(6),n.qZA(),n.qZA(),n.qZA()),2&t){var a=e.$implicit,r=n.oxw().$implicit;n.xp6(3),n.Oqu(a.key),n.xp6(3),n.Oqu(r.framework[a.key])}}function C(t,e){if(1&t&&(n.TgZ(0,"div",4),n.YNc(1,M,7,2,"div",5),n.ALo(2,"keyvalue"),n.qZA()),2&t){var a=e.$implicit;n.xp6(1),n.Q6J("ngForOf",n.lcZ(2,1,a.framework))}}var $=function(){function t(){this.tableName="",this.mysql={INT:"integer('#columnName')#unsigned",BIGINT:"bigInteger('#columnName')#unsigned",BLOB:"binary",BOOLEAN:"boolean",CHAR:"char('#columnName', #length)",DATE:"date('#columnName')",DATETIME:"dateTime('#columnName')",DECIMAL:"decimal('#columnName', #total_digits_comma_decimal_digits)#unsigned",DOUBLE:"double('#columnName', #total_digits_comma_decimal_digits)",ENUM:"enum('#columnName', #array)",FLOAT:"float('#columnName', #total_digits_comma_decimal_digits)",GEOMETRY:"geometry('#columnName')",GEOMETRYCOLLECTION:"geometryCollection('#columnName')",INTEGER:"integer('#columnName')#unsigned",IP:"ipAddress('#columnName')",JSON:"json('#columnName')",JSONB:"jsonb('#columnName')",LINESTRING:"lineString('#columnName')",LONGTEXT:"longText('#columnName')",MAC:"macAddress('#columnName')",MEDIUMINT:"mediumInteger('#columnName')#unsigned",MEDIUMTEXT:"mediumText('#columnName')",MULTILINESTRING:"multiLineString('#columnName')",MULTIPOINT:"multiPoint('#columnName')",MULTIPOLYGON:"multiPolygon('#columnName')",morphs:"nullableMorphs('#columnName')",nullable:"nullableUuidMorphs('#columnName')",timestamps:"nullableTimestamps()",POINT:"point('#columnName')",POLYGON:"polygon('#columnName')",SET:"set('#columnName', #array)",SMALLINT:"smallInteger('#columnName')#unsigned",VARCHAR:"string('#columnName', #length)",TEXT:"text('#columnName')",TIME:"time('#columnName')",TIMESTAMP:"timestamp('#columnName')",TINYINT:"tinyInteger('#columnName')#unsigned",UUID:"uuid('#columnName')",YEAR:"year('#columnName')"},this.schema=[]}return t.prototype.setParams=function(e){this.content=e},t.prototype.setSchema=function(e){this.schema=e},t.prototype.getRules=function(){var e={radio:["nullable"],checkbox:["nullable"],select:["nullable"],number:["nullable","numeric"],date:["nullable",'date_format:"d/m/Y"'],text:["nullable","string"],textarea:["nullable","string"]},a=this.content.html.tag.toLowerCase();if(void 0!==e[a]){e[a][0]=this.isRequired(),e[a].push(this.size());var r=e[a].filter(function(s){return""!=s&&null!=s});return['"'+this.content.name+'" => '+JSON.stringify(r)].join(",")}return[this.content.name+" => "+JSON.stringify(e[a])].join(",")},t.prototype.size=function(){if(this.content&&this.content.type&&this.content.type.length){var e=this.content.type.length;if(null!=e&&""!=e)return{number:"digits_between:1,"+e,date:"max:"+e,text:"max:"+e,radio:"max:"+e,checkbox:"max:"+e,select:"max:"+e,textarea:"max:"+e}[this.content.html.tag]}return null},t.prototype.get=function(){var e=this;return this.schema.init={fillable:[],rules:[],attributes:[],request:[]},this.schema.data.length>0&&this.schema.data.forEach(function(a){e.setParams(a),e.schema.init.fillable.push(a.definition.name),e.schema.init.request.push('"'+a.name+'" => $request->'+a.name),e.schema.init.attributes.push("'"+a.name+"' => '"+a.html.label+"'"),e.schema.init.rules.push(e.getRules())}),{framework:{validator:this.validator(),controller:this.controller(),model:this.model(),migration:this.migration()}}},t.prototype.model=function(){return"\n\t\t<?php\n\n\t\tnamespace App;\n\t\t\n\t\tuse Illuminate\\Database\\Eloquent\\Model;\n\t \n\t\tclass "+this.schema.name+" extends Model {\n\t\t\tprotected $table      = '"+this.schema.name+"';\n\t\t\tprotected $primaryKey = "+(void 0!==this.schema.primary_key?this.schema.primary_key.length>1?"[this.schema.primary_key]":"this.schema.primary_key[0]":"")+";\n\t\t\tpublic $incrementing  = true; \n\t\t\t\n\t\t\tprotected $fillable = [\n\t\t\t\t"+this.schema.data.map(function(e){return"'"+e.name+"'"})+"\n\t\t\t];\n\t\t}\n\t\t"},t.prototype.controller=function(){return"\n\t\t<?php\n\n\t\tnamespace App\\Http\\Controllers;\n\t\t\n\t\tuse Illuminate\\Http\\Request;\n\t\tuse App\\"+this.schema.name+";\n\t\tuse App\\Http\\Requests\\"+this.schema.name+"Request;\n\n\t\tclass "+this.schema.name+"Controller extends Controller\n\t\t{\n\t\t\t/**\n\t\t\t* Display a listing of the resource.\n\t\t\t*\n\t\t\t* @return \\Illuminate\\Http\\Response\n\t\t\t*/\n\t\t\tpublic function index()\n\t\t\t{\n\t\t\t\t//\n\t\t\t\t$result = "+this.schema.name+"::all();\n\n\t\t\t\treturn view('"+this.schema.name+".index', compact('result'));\n\t\t\t}\n\t\t\n\t\t\t/**\n\t\t\t* Show the form for creating a new resource.\n\t\t\t*\n\t\t\t* @return \\Illuminate\\Http\\Response\n\t\t\t*/\n\t\t\tpublic function create()\n\t\t\t{\n\t\t\t\t//\n\t\t\t\treturn view('"+this.schema.name+".create');\n\t\t\t}\n\t\t\n\t\t\t/**\n\t\t\t* Store a newly created resource in storage.\n\t\t\t*\n\t\t\t* @param  \\Illuminate\\Http\\Request  $request\n\t\t\t* @return \\Illuminate\\Http\\Response\n\t\t\t*/\n\t\t\tpublic function store("+this.schema.name+"Request $request)\n\t\t\t{\n\t\t\t\t//\n\t\t\t\t$r = "+this.schema.name+"::create([\n\t\t\t\t\t"+this.schema.init.request.join("\n")+"\n\t\t\t\t]);\n\n\t\t\t\treturn response()\n\t\t\t\t\t->route('"+this.schema.name+".create')\n\t\t\t\t\t->json([\n\t\t\t\t\t\t'success' => true\n\t\t\t\t\t]);\n\t\t\t}\n\t\t\n\t\t\t/**\n\t\t\t* Display the specified resource.\n\t\t\t*\n\t\t\t* @param  int  $id\n\t\t\t* @return \\Illuminate\\Http\\Response\n\t\t\t*/\n\t\t\tpublic function show($id)\n\t\t\t{\n\t\t\t\t//\n\t\t\t\t$result = "+this.schema.name+"::find($id);\n\n\t\t\t\treturn view('"+this.schema.name+".show', compact('result'));\n\t\t\t}\n\t\t\n\t\t\t/**\n\t\t\t* Show the form for editing the specified resource.\n\t\t\t*\n\t\t\t* @param  int  $id\n\t\t\t* @return \\Illuminate\\Http\\Response\n\t\t\t*/\n\t\t\tpublic function edit($id)\n\t\t\t{\n\t\t\t\t//\n\t\t\t\t$result = "+this.schema.name+"::find($id);\n\n\t\t\t\treturn view('"+this.schema.name+".edit', compact('result'));\n\t\t\t}\n\t\t\n\t\t\t/**\n\t\t\t* Update the specified resource in storage.\n\t\t\t*\n\t\t\t* @param  \\Illuminate\\Http\\Request $request\n\t\t\t* @param  int  $id\n\t\t\t* @return \\Illuminate\\Http\\Response\n\t\t\t*/\n\t\t\tpublic function update("+this.schema.name+"Request $request, $id)\n\t\t\t{\n\t\t\t\t//\n\t\t\t\t$result = "+this.schema.name+"::find($id);\n\t\t\t\t\t\t->update(\n\t\t\t\t\t\t\t"+this.schema.init.request.join("\n")+"\n\t\t\t\t\t\t);\n\t\t\t}\n\t\t\n\t\t\t/**\n\t\t\t* Remove the specified resource from storage.\n\t\t\t*\n\t\t\t* @param  int  $id\n\t\t\t* @return \\Illuminate\\Http\\Response\n\t\t\t*/\n\t\t\tpublic function destroy($id)\n\t\t\t{\n\t\t\t\t//\n\t\t\t\t$result = "+this.schema.name+"::find($id);\n\t\t\t\t$result->delete();\n\t\t\n\t\t\t\treturn redirect()\n\t\t\t\t\t->route('"+this.schema.name+".show', $id)\n\t\t\t\t\t->with('success', true);\n\t\t\t}\n\t\t}\t\t\n\t\t"},t.prototype.validator=function(){return"\n\t\t/**\n\t\t * Determine if the user is authorized to make this request.\n\t\t *\n\t\t * @return bool\n\t\t*/\n\t\tpublic function authorize(){\n\t\t\treturn true;\n\t\t}\n\t\n\t\tpublic function rules(){\n\t\t\t$rules = [\n\t\t\t\t"+this.schema.init.rules.join("\n")+"\n\t\t\t];\n\t\t\n\t\t\treturn $rules;\n\t\t}\n\t\n\t\t/**\n\t\t * Get the validation rules that apply to the request.\n\t\t *\n\t\t * @return array\n\t\t */\n\t\tpublic function attributes(){\n\t\t\t$attributes = [\n\t\t\t\t"+this.schema.init.attributes.join("\n")+"\n\t\t\t];\n\t\t\treturn $attributes;\n\t\t}\t\t\n\t\t"},t.prototype.migration=function(){var e=this,a=[],r={INT:"increments('#columnName')",BIGINT:"bigIncrements('#columnName')",MEDIUMINT:"mediumIncrements('#columnName')",SMALLINT:"smallIncrements('#columnName')",TINYINT:"tinyIncrements('#columnName')"},s=this.schema.name;if(a=this.schema.data.map(function(u){var l="",p="",c="",i=u,v=i.type.datatype.toUpperCase(),o=e.mysql[i.type.datatype.toUpperCase()];return void 0===(o=o.replace(/#unsigned/g,""))&&(o=v+"('#columnName')"),i.options&&i.options.autoincrement&&Object.keys(r).forEach(function(b){v==b&&(o=r[b])}),o&&(o=o.replace(/#columnName/g,i.name)),i.options&&(i.options.nullable&&(p="->nullable()"),i.options.unsigned&&(c="->unsigned()")),i.type&&(i.type.values&&(l=JSON.stringify(i.type.values),o=o.replace(/#array/g,l)),i.type.length&&""!=i.type.length&&(o=o.replace(/#length/g,i.type.length)),i.type.decimals||i.type.digits)&&(o=o.replace(/#total_digits_comma_decimal_digits/g,i.type.digits+", "+i.type.decimals)),"$table->"+o+c+p+";"}),this.schema.primary_key&&this.schema.primary_key.length>0){var O=this.schema.primary_key.map(function(u){return u.column});a.push("$table->primary("+JSON.stringify(O)+")")}if(this.schema.unirque_keys&&this.schema.unirque_keys.length>0){var N=[];this.schema.unirque_keys.forEach(function(u){u.columns.map(function(l){return N.push(l.column)})}),a.push("$table->unique("+JSON.stringify(N)+");")}return this.schema.foreign_keys&&this.schema.foreign_keys.length>0&&this.schema.foreign_keys.forEach(function(u){var l="",p="";u.columns.forEach(function(c){l="foreign('"+c.column+"')"}),u.reference.columns.forEach(function(c){p="references('"+c.column+"')->on('"+u.reference.table+"')"}),a.push("$table->"+l+"->"+p)}),"\n\t\t\t<?php\n\n\t\t\tuse IlluminateSupportFacadesSchema;\n\t\t\tuse IlluminateDatabaseSchemaBlueprint;\n\t\t\tuse IlluminateDatabaseMigrationsMigration;\n\t\t\t\n\t\t\tclass Create"+s+"Table extends Migration\n\t\t\t{\n\t\t\t\t/**\n\t\t\t\t * Run the migrations.\n\t\t\t\t *\n\t\t\t\t * @return void\n\t\t\t\t */\n\t\t\t\tpublic function up()\n\t\t\t\t{\n\t\t\t\t\t\n\t\tSchema::create('"+s+"', function (Blueprint $table) {\n\t\t\t"+a.join("\n")+"\n\t\t});\n\t\t\t\t}\n\t\t\t\n\t\t\t\t/**\n\t\t\t\t * Reverse the migrations.\n\t\t\t\t *\n\t\t\t\t * @return void\n\t\t\t\t */\n\t\t\t\tpublic function down()\n\t\t\t\t{\n\t\t\t\t\tSchema::drop('"+s+"');\n\t\t\t\t}\n\t\t\t}"},t.prototype.isRequired=function(){return this.content&&this.content.options?this.content.options.nullable?"nullable":"required":"nullable"},t.prototype.setTableName=function(e){this.tableName=e},t.prototype.getMessages=function(){return this.messages},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac=function(a){return new(a||t)},providedIn:"root"}),t}(),A=[{path:"",canActivate:[T.a],component:function(){function t(e,a){this.snakeCaseToCamelCase=e,this.laravel=a}return t.prototype.ngOnInit=function(){},t.prototype.getSchemas=function(e){var a=this;this.schemas=e,this.schemas.map(function(r){return a.laravel.setSchema(r),r.framework=a.laravel.get().framework,r}),console.log(this.schemas)},t.\u0275fac=function(a){return new(a||t)(n.Y36(y),n.Y36($))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-migration"]],features:[n._Bn([y])],decls:4,vars:1,consts:[[1,"row"],[1,"col-md-8","offset-md-2"],[3,"schemasChange"],["class","border mt-2",4,"ngFor","ngForOf"],[1,"border","mt-2"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],[1,"card-body"],["cols","30","rows","10",1,"form-control"]],template:function(a,r){1&a&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"app-create-table-to-json",2),n.NdJ("schemasChange",function(h){return r.getSchemas(h)}),n.qZA(),n.YNc(3,C,3,3,"div",3),n.qZA(),n.qZA()),2&a&&(n.xp6(3),n.Q6J("ngForOf",r.schemas))},directives:[I.dJ,d.sg],pipes:[d.Nd],styles:[""]}),t}()}],E=function(){function t(){}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[g.Bz.forChild(A)],g.Bz]}),t}(),R=m(79398),q=function(){function t(){}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[d.ez,E,R.r]]}),t}()}}]);